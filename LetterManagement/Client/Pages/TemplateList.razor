@page "/templateList"
@using LetterManagement.Shared.Models
@inject HttpClient Http;
@if (LetterTemplates is null)
{
    <MudProgressLinear  Color="Color.Info" Indeterminate="true" />
}
else
{
    <MudStack>
    @foreach (var template in LetterTemplates)
    {
        <MudCard Style="@(@"width: 60%")">
            <MudCardHeader>
                <CardHeaderContent>
                    <MudText Typo="@Typo.h5">@template.Name</MudText>
                </CardHeaderContent>
            </MudCardHeader>
            <MudCardContent>
      
                <MudText>Đơn vị: @template.Department?.Name</MudText>
                <MudText GutterBottom="@true">Phiên bản: @template.ModifiedAt.ToString("dd.MM.yyyy")</MudText>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="@Variant.Text" Color="@Color.Primary">Viết đơn</MudButton>
            </MudCardActions>
        </MudCard>
    }
    </MudStack>

}
@code {
    protected IEnumerable<LetterTemplate>? LetterTemplates { get; set; } = null;

    protected override async void OnInitialized()
    {
        this.LetterTemplates = await Http.GetFromJsonAsync<IEnumerable<LetterTemplate>>("api/LetterTemplates");
        StateHasChanged();
    }

}