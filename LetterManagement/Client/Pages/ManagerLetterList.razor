@page "/ManagerLetterList"
@using LetterManagement.Shared.Models

@using LetterManagement.Client.Components;
@using LetterManagement.Client.StateContainer
@inject HttpClient Http
@inject UserState UserState;

<LetterList Letters="Letters"></LetterList>

@code {


    private List<Letter>? Letters { get; set; }
    
    protected override async void OnInitialized()
    {
        try
        {
            this.Letters = await Http.GetFromJsonAsync<List<Letter>>($"api/Letters/manager/{UserState.Manager.Id}");
            StateHasChanged();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.StackTrace);
        }

    }
}